<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>WonderPush JavaScript SDK Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">WonderPush JavaScript SDK</a>
	</div>
	<div class="navbar-collapse">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="WonderPush.html">WonderPush</a></li><li><a href="WonderPushSDK.html">WonderPushSDK</a></li><li><a href="WonderPushSDK.Constants.html">WonderPushSDK.Constants</a></li><li><a href="WonderPushSDK.Geo.html">WonderPushSDK.Geo</a></li><li><a href="WonderPushSDK.Notification.html">WonderPushSDK.Notification</a></li><li><a href="WonderPushSDK.Rest.html">WonderPushSDK.Rest</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="WonderPushSDK.InvalidStateException.html">WonderPushSDK.InvalidStateException</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="WonderPushSDK.html#event:WonderPushSessionEvent">WonderPushSDK#event:WonderPushSessionEvent</a></li><li><a href="WonderPushSDK.html#event:WonderPushSubscriptionEvent">WonderPushSDK#event:WonderPushSubscriptionEvent</a></li>
				</ul>
			</li>
			
		</ul>
	</div>
</div>
</div>


<div class="container">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
    		<h1 class="page-title">Index</h1>
			

	



    <!--h3>wonderpush-javascript-sdk 1.0.5</h3-->









	





    <section class="readme-section">
        <article><h1>WonderPush JavaScript SDK Guide</h1><p>Web Push notifications allow your users to opt-in to timely updates from your
site and allow you to effectively re-engage them with customized, engaging
content, even when your site is not being browsed.</p>
<p>This quick start guide shows you how to get push messaging up and running on
your website within three minutes.</p>
<p>This SDK supports HTTP, HTTPS, and multiple subdomains websites!
It currently works with Chrome 42+ and will soon support Safari, and Firefox.</p>
<h2><a id="register-app-wonderpush"></a>Register your website in WonderPush</h2><p>Log in or sign up on <a href="https://dashboard.wonderpush.com/account/login">WonderPush</a>.</p>
<p>Create your application.
Make sure to check <em>Web</em> under the <em>Platforms</em> section.</p>
<p>Grab your <strong>webkey</strong> under the <em>Settings / Keys</em> menu.</p>
<p>Edit the required configuration for the <em>Web</em> platform right below.</p>
<h2><a id="load-sdk"></a>Setup the SDK</h2><h3><a id="load-sdk"></a>Load the SDK</h3><p>Copy/paste the following script before the closing <code>&lt;body&gt;</code> tag:</p>
<pre class="prettyprint source lang-html"><code>&lt;script>
  (function(w, d, s, id, n){
    w[n] = w[n] || {q: [],
      init: function(o) {w[n].initOpts = o;},
      ready: function(c) {w[n].q.push(c);}};
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = &quot;https://cdn.by.wonderpush.com/sdk/1.1/wonderpush-loader.min.js&quot;;
    fjs.parentNode.insertBefore(js, fjs);
  }(window, document, 'script', 'wonderpush-jssdk-loader', 'WonderPush'));
&lt;/script></code></pre><h3><a id="initialize-sdk"></a>Initialize the SDK</h3><p>You can call the <a href="WonderPush.html#.init">WonderPush.init</a> function whenever you want, there is no
need to call it right away. For instance you can wait to retrieve the <code>userId</code>.
Note however that the previous code block must appear before in the page.</p>
<p>For an easy initialization, use the following right after the previous codeblock
(it can be within the same <code>&lt;script&gt;</code> tag too):</p>
<pre class="prettyprint source lang-html"><code>&lt;script>
  WonderPush.init({
    webKey: '[YOUR_WEBKEY]', // Copy/paste the webkey found in your dashboard under the `Settings / Keys` menu
    userId: null,            // optional, default value: null
    // The following options will be overriden once you've updated your configuration in the dashboard
    customDomain: '[YOUR ALIAS]', // Please read the advice
    // The following options can be provided using your dashboard, or overridden here
    notificationDefaultUrl: '[YOUR_DEFAULT_NOTIFICATION_URL]',
    applicationName: '[YOUR_WEBSITE_NAME]',              // optional
    notificationIcon: '[YOUR_DEFAULT_NOTIFICATION_ICON]' // optional
  });
&lt;/script></code></pre><p>Replace:</p>
<ul>
<li><p><strong><code>[YOUR_WEBKEY]</code></strong> with the webkey you will find in your dashboard under
the <em>Settings / Keys</em> menu.</p>
</li>
<li><p><strong><code>[YOUR_ALIAS]</code></strong> with a simple alias uniquely representing your website,
with no space, dots or uppercase letters.<br/>
Example: <code>&quot;yourwebsite&quot;</code>.<br/>
This is an important option. The notifications will be shown are originating
from <code>https://yourwebsite.by.wonderpush.com</code> and the notification permission
and push subscriptions are tied to this domain.<br/>
If you wish to use your very own domain here, contact us for instructions.
Meanwhile, you can test your integration using a simple alias like shown above.</p>
</li>
<li><p><strong><code>[YOUR_DEFAULT_NOTIFICATION_URL]</code></strong> with the proper URL to your website landing page.<br/>
Example: <code>&quot;http://www.yourwebsite.com/&quot;</code>.<br/>
This URL will be used if none is already present on the clicked notification.</p>
</li>
<li><p><strong><code>[YOUR_WEBSITE_NAME]</code></strong> with the display name of your website.<br/>
Example: <code>&quot;My Website&quot;</code>.<br/>
Use proper casing for best results.</p>
</li>
<li><p><strong><code>[YOUR_DEFAULT_NOTIFICATION_ICON]</code></strong> with the URL to an image representing
your website, preferably using HTTPS.<br/>
Example: <code>&quot;https://www.yourwebsite.com/img/notification-icon.png&quot;</code>.<br/>
The display of this image changes from browser to browser and platform to
platform, but a square image around 100 pixels wide will do.<br/>
This image is also shown during the registration process.</p>

</li>
</ul>
<p>When the SDK will be initialized, the <a href="WonderPush.html#.ready">WonderPush.ready</a> function will
return the <a href="WonderPushSDK.html">WonderPushSDK</a> object to you.
You can grab the SDK once and for all, or call this function whenever needed.
Just be aware that the initialization is an asynchronous process.</p>
<h3><a id="register-notifications"></a>Register to notifications</h3><p>At some point, either right away, or after some pages have been visited, you
should register the user for push notifications.
Here is how:</p>
<pre class="prettyprint source lang-javascript"><code>WonderPush.ready(function(WonderPushSDK){
  if (WonderPushSDK.isNativePushNotificationSupported()) {
    if (/* optionally test if user engagement is sufficient and he is willing to accept notifications */) {
      WonderPushSDK.askNativePushNotificationPermission();
    }
  }
});</code></pre><p>You can implement your own subscription switch, like shown in the demo.
Take a look at the demo code for more information.</p>
<h3><a id="test-notifications"></a>Test push notifications</h3><p>Go to your website, and register to push notifications.</p>
<p>Head to your <a href="https://dashboard.wonderpush.com/">dashboard</a>.</p>
<p>You should now see yourself listed as <em>pushable</em> in the <em>All users</em> segment,
accessible through <em>Audience</em> in the menu.</p>
<p>If not, please go back and check your steps, especially the <code>customDomain</code> value.</p>
<p>Go to <em>Notification</em> and click the <em>Create notification</em> button.
Write a small message, target all users, and keep the default scheduling.
Back in the notifications list, click the <em>FIRE</em> button in front of your new notification.</p>
<p>Allow a few seconds, and voila! You should have received your first push notification.</p>
<h3><a id="finalize-configuration"></a>Finalize configuration</h3><p>Once happy of the initialization options, put them in the dashboard.</p>
<p>Go in the <em>Settings / Keys</em> menu of your <a href="https://dashboard.wonderpush.com/">dashboard</a>.</p>
<p>Edit the required configuration for the <em>Web</em> platform right below.</p>
<p>Please fill the <em>Custom domain</em> field using the value of the <code>customDomain</code> key,
and remove it from the initialization options.</p>
<p>You can continue with the following fields, if you wish.
This way you can omit them from the initialization options and update their value
from the dashboard with having to update your website, while still being able to
override them from the code.</p>
<p>Fill the <em>Website name</em> field using the value of the <code>applicationName</code> key.</p>
<p>Fill the <em>Notification defaul URL</em> field using the value of the <code>notificationDefaultUrl</code> key.</p>
<p>Fill the <em>Notification icon</em> field using the value of the <code>notificationIcon</code> key.</p>
<p>Click the <em>Update keys</em> button.</p>
<p><strong>Note:</strong> The configuration is cached, so please allow 24 hours before expecting
<em>updates</em> to be taken into account.<br/>
The first setup, however, should be available right away!</p>
<p><strong>Developer note:</strong> The configuration is also cached in the browser in the Local Storage,
you can try to update things (like <code>customDomain</code>) there, to go forward faster.
If you update the <code>customDomain</code>, refresh the page, and update the configuration
cached in the Local Storage of the new domain too.</p>
<h2><a id="using-sdk"></a>Using the SDK</h2><h3><a id="using-sdk--installation-properties"></a>Adding tags and custom properties to the installation</h3><p>You can then add tags to an installation using the
<a href="WonderPushSDK.html#putInstallationCustomProperties">WonderPushSDK#putInstallationCustomProperties</a> function like this:</p>
<pre class="prettyprint source lang-javascript"><code>WonderPush.ready(function(WonderPushSDK){
  WonderPushSDK.putInstallationCustomProperties(properties);
  // For example:
  //   var properties = { string_subscribedCategories: [&quot;world&quot;, &quot;economics&quot;] };
  // Note that the prefix is mandatory for indexation.
  // Consult the WonderPush documentation for more information.
});</code></pre><p>If you even need to read the current custom properties of an installation, use the
<a href="WonderPushSDK.html#getInstallation">WonderPushSDK#getInstallation</a> function like this:</p>
<pre class="prettyprint source lang-javascript"><code>WonderPush.ready(function(WonderPushSDK){
  WonderPushSDK.getInstallation().then(function(installation) {
    var custom = installation.custom || {};
    // For example:
    //   var subscribedCategories = custom.string_subscribedCategories || [];
  });
});</code></pre><h3><a id="using-sdk--track-event"></a>Tracking events</h3><p>If your current plan allow it, you can then track an event using the
<a href="WonderPushSDK.html#trackEvent">WonderPushSDK#trackEvent</a> function like this:</p>
<pre class="prettyprint source lang-javascript"><code>WonderPush.ready(function(WonderPushSDK){
  WonderPushSDK.trackEvent(type, parameters);
  // For example:
  //   var type = &quot;newsRead&quot;;
  //   var properties = { string_categories: [&quot;technologies&quot;, &quot;economics&quot;] };
  // Note that the prefix is mandatory for indexation.
  // Consult the WonderPush documentation for more information.
});</code></pre><p>As opposed to an installation properties (like a tag), an event is set in time
and expires after 3 months.
You can for instance query against an event that occured within the last week.
For example: with events, you can target users that have read world news 3 days
ago but have not subscribed to this category.</p>
<h1><a id="demo-app"></a>Demo application</h1><p>You can <a href="http://www.wonderpush.com/demo/">test it live here</a>.</p>
<h1><a id="reference"></a>API Reference</h1><p>Take a look at the methods exposed by the <a href="WonderPush.html">WonderPush</a> and <a href="WonderPushSDK.html">WonderPushSDK</a> classes.</p></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3"></div>
		</div>
	

</div>
</div>


<footer>


	<span class="copyright">
	© 2015 WonderPush. All rights reserved.
	</span>
	<br />

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta3</a>
	on Fri Sep 11th 2015 using the <a
	href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
</span>
</footer>

<!--<script src="scripts/sunlight.js"></script>-->
<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/bootstrap-dropdown.js"></script>
<script src="scripts/toc.js"></script>

<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "h1,h2,h3,h4",
		showAndHide : false,
		scrollTo    : "100px"
	} );

	$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();
	//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

	$( ".tutorial-section pre, .readme-section pre" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			lang = "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : false,
		showMenu : true,
		enableDoclinks : true
	} );
} );
</script>



<!--Navigation and Symbol Display-->

<script>
	$( function () {
		$( '#main' ).localScroll( {
			offset : { top : 60 } //offset by the height of your header (give or take a few px, see what works for you)
		} );
		$( "dt.name" ).each( function () {
			var $this = $( this ).find("h4");
			var icon = $( "<i/>" ).addClass( "icon-plus-sign" ).addClass( "pull-right" ).addClass( "icon-white" );
			var dt = $(this);
			var children = dt.next( "dd" );

			dt.prepend( icon ).css( {cursor : "pointer"} );
			dt.addClass( "member-collapsed" ).addClass( "member" );


			children.hide();

			dt.children().on( "click", function () {
				children = dt.next( "dd" );
				children.slideToggle( "fast", function () {

					if ( children.is( ":visible" ) ) {
						icon.addClass( "icon-minus-sign" ).removeClass( "icon-plus-sign" ).removeClass( "icon-white" );
						dt.addClass( "member-open" ).animate( "member-collapsed" );
					} else {
						icon.addClass( "icon-plus-sign" ).removeClass( "icon-minus-sign" ).addClass( "icon-white" );
						dt.addClass( "member-collapsed" ).removeClass( "member-open" );
					}
				} );
			} );

		} );
	} );
</script>


<!--Google Analytics-->


</body>
</html>